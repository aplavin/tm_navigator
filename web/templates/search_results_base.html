<div class="well well-sm">
    Showing <samp id="search-count"></samp> of <samp>{{ results_cnt }}</samp> results.
    Search took <samp>{{ (results.runtime * 1000) | int }}</samp> ms.
</div>

{% if corrected %}
    <div class="well well-lg">
        Did you mean <a href="{{ url_for(endpoint, query=corrected.string, **request.args) }}">{{ corrected.html|safe }}</a>?
    </div>
{% endif %}

{% macro show_results(results) %}
    {% for hit in results %}
        {% set loop_last = loop.last %}
        {% block hit_item scoped %}{% endblock %}
    {% endfor %}
{% endmacro %}

{% if grouped %}
    {% for gr_name, gr_hits in grouped[:groups_max] %}
        <div class="text-center">
            <div class="bs-callout bs-callout-right bs-callout-default bg-success">
                <h4 class="text-right">{{ gr_name }}</h4>
            </div>
            {{ show_results(gr_hits[:group_elems_max]) }}
            {% if gr_hits|length > group_elems_max %}
                <div class="bs-callout bs-callout-default bg-info">
                    {{ gr_hits|length - group_elems_max }} more results from this group are not shown
                </div>
            {% endif %}
        </div>
    {% endfor %}

    {% block groups_tail %}
    {% if grouped|length > groups_max %}
        <div class="bs-callout bs-callout-default bg-info">
            {{ grouped|length - groups_max }} more groups are not shown
        </div>
    {% endif %}
    {% endblock %}
{% else %}
    <div class="text-center">
        {{ show_results(results) }}
    </div>
{% endif %}
